function HomePage(){}function NewsPage(e){var n=$.Deferred();this.load=function(){e.api.loadNews().done(function(e){n.resolve(e)})};var t=function(e){$(".news .pair .item:first-child").each(function(n,t){var i=e[n];$(".date",t).text(i.Date),$(".title",t).text(i.Title),$(".loc",t).text(i.Location)})};$.when(n,e.ready).done(function(e){t(e)})}function AboutPage(e){var n=function(){var e=$(".section-about");$("svg",e).on("mouseover click",function(n){if("path"===n.target.tagName){if("trans"===n.target.getAttribute("class"))return;var t=$(n.target).index();e.toggleClass("first",0===t),e.toggleClass("second",0!==t)}else e.removeClass("first second")})};e.ready.done(n)}function PhotoPage(e){var n,t=function(){n=$(".section-photo"),n.on("click",".tiles a",function(n){n.preventDefault();var t=this.getAttribute("href"),i=t.indexOf("/"),a=parseInt(t.substring(i+1));e.moveTo(4,a,!1)}),n.on("click","a.ar.left",function(){$.fn.fullpage.moveSlideLeft()}),n.on("click","a.ar.right",function(){$.fn.fullpage.moveSlideRight()})};this.onEnter=function(){e.resetSlide(n)},this.onSlideLeave=function(t,i,a){return e.skipOnLeave?void 0:"#photo"===window.location.hash?(e.resetSlide(n),!1):0===i&&"right"===a||1===i&&"left"===a?!1:void 0},e.ready.done(t)}function VideoPage(e){var t,n="https://www.youtube.com/embed/",i=function(e,i){if(!(0>e||e>6)){var a=t.find(".slide:eq("+(e+1)+') iframe[src=""]');if(0!==a.length){i||(i=t.find(".tiles a:eq("+e+")"));var o=i.attr("href"),s=o.substring(o.lastIndexOf("/")+1);a.attr("src",n+s+"?enablejsapi=1"),a.parents(".cnt:first").find(".title span").text(i.find("span").text())}}},a=function(){t=$(".section-video"),t.on("click",".tiles a",function(n){n.preventDefault();var t=$(this),a=t.parents("li:first").index();i(a,t),e.moveTo(5,a+1,!1)}),t.on("click","a.ar.left",function(){$.fn.fullpage.moveSlideLeft()}),t.on("click","a.ar.right",function(){$.fn.fullpage.moveSlideRight()})},o=function(){var e=t.find(".slide.active iframe")[0];e&&e.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")};this.onEnter=function(){e.resetSlide(t)},this.onSlideLeave=function(n,a,s){if(!e.skipOnLeave){if("#video"===window.location.hash)return e.resetSlide(t),!1;if(0===a&&"right"===s||1===a&&"left"===s)return!1}o(),i("right"===s?a:a-2)},e.ready.done(a)}function ContactsPage(e){var n,t=function(){n=$(".section-contacts"),n.find(":input").on("keydown",function(e){e.stopPropagation()}),n.find("form").submit(function(t){t.preventDefault();var i=$(this),a=i.find("input[name=email]").val(),o=i.find("input[name=name]").val(),s=i.find("textarea").val();e.api.sendEmail(a,"Contact from "+o,{name:o,message:s}).done(function(){n.find("form button").text("Thank you").prop("disabled",!0)})})};e.ready.done(t)}var Api=function(e){this.sendEmail=function(n,t,i){return $.post(e+"/mail",{email:n,subject:t,values:i})},this.loadNews=function(){return $.post(e+"/news")}},App=function(e){var n={api:new Api("http://localhost:61027/api"),ready:e.Deferred(),skipOnLeave:!1,moveTo:function(n,t,i){this.skipOnLeave=!0,i===!1&&e.fn.fullpage.setScrollingSpeed(0),e.fn.fullpage.moveTo(n,t),i===!1&&e.fn.fullpage.setScrollingSpeed(700),this.skipOnLeave=!1},resetSlide:function(n){n.find(".fp-slide").removeClass("active"),n.find(".fp-slide:first").addClass("active"),e.fn.fullpage.keepSlidesPosition()}};return n.pages=[new HomePage(n),new NewsPage(n),new AboutPage(n),new PhotoPage(n),new VideoPage(n),new ContactsPage(n)],{load:function(){e.each(n.pages,function(){this.load&&this.load()})},onReady:function(){n.ready.resolve();var t=window.location.hash;if(t&&t.length>1){t.indexOf("/")>0&&(t=t.substring(0,t.indexOf("/")));var i=e("body");i.hasClass("fp-viewing-"+t.substring(1))||(i.removeClass("fp-viewing-home"),i.addClass("fp-viewing-"+t.substring(1))),window.location.hash!==t&&(window.location.hash=t)}},onLeave:function(t,i){var o=n.pages[t-1];o&&e.isFunction(o.onLeave)&&o.onLeave(),o=n.pages[i-1],o&&e.isFunction(o.onEnter)&&o.onEnter()},onSlideLeave:function(t,i,a,o){var s=n.pages[i-1];return s&&e.isFunction(s.onSlideLeave)?s.onSlideLeave(t,a,o):void 0}}}(jQuery);App.load();var $=$||jQuery;$(document).ready(function(){"use strict";var e=function(){var e="auto "+window.innerHeight+"px";$("#header .bg").css("background-size",e)};App.onReady();var n=$("body");$("#fullpage").fullpage({anchors:["home","news","about","photo","video","contacts"],menu:"#nav",scrollingSpeed:1,resize:!1,css3:!0,controlArrows:!1,paddingTop:"75px",animateAnchor:!1,loopHorizontal:!1,afterResize:e,onLeave:function(e,t,i){return 1===e?n.toggleClass("collapse",!0):1===t&&n.toggleClass("collapse",!1),App.onLeave(e,t,i)},onSlideLeave:function(e,n,t,i){return App.onSlideLeave(e,n,t,i)}}),$(document).bind("mousemove.hoverTest",function(){n.removeClass("nohover")}),$(document).on("touchstart",function(){$(document).unbind("mousemove.hoverTest")}),e(),$(".fp-section.active").index()>0&&n.toggleClass("collapse",!0),window.setTimeout(function(){n.addClass("animate"),$.fn.fullpage.setScrollingSpeed(700)},0)});