function HomePage(){}function NewsPage(n){var t=$.Deferred(),i;this.load=function(){n.api.loadNews().done(function(n){t.resolve(n)})};i=function(n){$(".news .pair .item:first-child").each(function(t,i){var r=n[t];$(".date",i).text(r.Date);$(".title",i).text(r.Title);$(".loc",i).text(r.Location)})};$.when(t,n.ready).done(function(n){i(n)})}function AboutPage(n){var t=function(){var n=$(".section-about");$("svg",n).on("mouseover click",function(t){if(t.target.tagName==="path"){if(t.target.getAttribute("class")==="trans")return;var i=$(t.target).index();n.toggleClass("first",i===0);n.toggleClass("second",i!==0)}else n.removeClass("first second")})};n.ready.done(t)}function PhotoPage(n){var t,i=function(){t=$(".section-photo");t.on("click",".tiles a",function(t){t.preventDefault();var i=this.getAttribute("href"),r=i.indexOf("/"),u=parseInt(i.substring(r+1));n.moveTo(4,u,!1)});t.on("click","a.ar.left",function(){$.fn.fullpage.moveSlideLeft()});t.on("click","a.ar.right",function(){$.fn.fullpage.moveSlideRight()})};this.onEnter=function(){n.resetSlide(t)};this.onSlideLeave=function(i,r,u){if(!n.skipOnLeave)return window.location.hash==="#photo"?(n.resetSlide(t),!1):r===0&&u==="right"||r===1&&u==="left"?!1:void 0};n.ready.done(i)}function VideoPage(n){var r="https://www.youtube.com/embed/",t,i=function(n,i){var u,f,e;n<0||n>6||(u=t.find(".slide:eq("+(n+1)+') iframe[src=""]'),u.length!==0)&&(i||(i=t.find(".tiles a:eq("+n+")")),f=i.attr("href"),e=f.substring(f.lastIndexOf("/")+1),u.attr("src",r+e+"?enablejsapi=1"),u.parents(".cnt:first").find(".title span").text(i.find("span").text()))},u=function(){t=$(".section-video");t.on("click",".tiles a",function(t){t.preventDefault();var r=$(this),u=r.parents("li:first").index();i(u,r);n.moveTo(5,u+1,!1)});t.on("click","a.ar.left",function(){$.fn.fullpage.moveSlideLeft()});t.on("click","a.ar.right",function(){$.fn.fullpage.moveSlideRight()})},f=function(){var n=t.find(".slide.active iframe")[0];n&&n.contentWindow.postMessage('{"event":"command","func":"pauseVideo","args":""}',"*")};this.onEnter=function(){n.resetSlide(t)};this.onSlideLeave=function(r,u,e){if(!n.skipOnLeave){if(window.location.hash==="#video")return n.resetSlide(t),!1;if(u===0&&e==="right"||u===1&&e==="left")return!1}f();e==="right"?i(u):i(u-2)};n.ready.done(u)}function ContactsPage(n){var t,i=function(){t=$(".section-contacts");t.find(":input").on("keydown",function(n){n.stopPropagation()});t.find("form").submit(function(i){i.preventDefault();var r=$(this),f=r.find("input[name=email]").val(),u=r.find("input[name=name]").val(),e=r.find("textarea").val();n.api.sendEmail(f,"Contact from "+u,{name:u,message:e}).done(function(){t.find("form button").text("Thank you").prop("disabled",!0)})})};n.ready.done(i)}var Api=function(n){this.sendEmail=function(t,i,r){return $.post(n+"/mail",{email:t,subject:i,values:r})};this.loadNews=function(){return $.post(n+"/news")}},App=function(n){var t={api:new Api("http://goldartduo.apphb.com/api"),ready:n.Deferred(),skipOnLeave:!1,moveTo:function(t,i,r){this.skipOnLeave=!0;r===!1&&n.fn.fullpage.setScrollingSpeed(0);n.fn.fullpage.moveTo(t,i);r===!1&&n.fn.fullpage.setScrollingSpeed(700);this.skipOnLeave=!1},resetSlide:function(t){t.find(".fp-slide").removeClass("active");t.find(".fp-slide:first").addClass("active");n.fn.fullpage.keepSlidesPosition()}};return t.pages=[new HomePage(t),new NewsPage(t),new AboutPage(t),new PhotoPage(t),new VideoPage(t),new ContactsPage(t)],{load:function(){n.each(t.pages,function(){this.load&&this.load()})},onReady:function(){t.ready.resolve();var n=window.location.hash;n.indexOf("/")>0&&(window.location.hash=n.substring(0,n.indexOf("/")))},onLeave:function(i,r){var u=t.pages[i-1];u&&n.isFunction(u.onLeave)&&u.onLeave();u=t.pages[r-1];u&&n.isFunction(u.onEnter)&&u.onEnter()},onSlideLeave:function(i,r,u,f){var e=t.pages[r-1];if(e&&n.isFunction(e.onSlideLeave))return e.onSlideLeave(i,u,f)}}}(jQuery),$;App.load();$=$||jQuery;$(document).ready(function(){"use strict";var t=function(){var n="auto "+window.innerHeight+"px";$("#header .bg").css("background-size",n)},n;App.onReady();n=$("body");$("#fullpage").fullpage({anchors:["home","news","about","photo","video","contacts"],menu:"#nav",scrollingSpeed:1,resize:!1,css3:!0,controlArrows:!1,paddingTop:"75px",animateAnchor:!1,loopHorizontal:!1,afterResize:t,onLeave:function(t,i,r){t===1?n.toggleClass("collapse",!0):i===1&&n.toggleClass("collapse",!1);return App.onLeave(t,i,r)},onSlideLeave:function(n,t,i,r){return App.onSlideLeave(n,t,i,r)}});$(document).bind("mousemove.hoverTest",function(){n.removeClass("nohover")});$(document).on("touchstart",function(){$(document).unbind("mousemove.hoverTest")});t();$(".fp-section.active").index()>0&&n.toggleClass("collapse",!0);window.setTimeout(function(){n.addClass("animate");$.fn.fullpage.setScrollingSpeed(700)},0)});
//# sourceMappingURL=app.min.js.map
